// The ui-variables file is provided by base themes provided by Atom.
//
// See https://github.com/atom/atom-dark-ui/blob/master/styles/ui-variables.less
// for a full listing of what's available.
@import "ui-variables";
@import "syntax-variables";

git-experiment-history-view {
  display: flex;
  background: @pane-item-background-color;

  .history {
    font-family: @font-family;
    font-size: @font-size;
    color:@text-color;
    width: 320px;
    overflow: auto;
    border-right:1px solid @pane-item-border-color;

    .commit {
      padding: 9px 10px 10px 52px;
      box-shadow:inset fade(@pane-item-border-color, 20%) 0 -1px 0;
      cursor:default;
      position:relative;
      min-height:52px;
      box-sizing:border-box;
    }

    .commit.selected {
      background: @background-color-highlight;
      color:@text-color-highlight;
      box-shadow:@background-color-highlight 0 -1px 0;

      .meta > div {
        color:fade(@text-color-highlight, 70%);
      }
    }

    &:focus .commit.selected {
      background: @background-color-selected;
      color:@text-color-selected;

      .meta > div {
        color:fade(@text-color-selected, 70%);
      }
    }

    .message {
      font-size:110%;
      font-weight:bold;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }

    .meta {
      display:table;
      width:100%;

      & > div {
        display:table-cell;
        color:@text-color-subtle;
      }
    }

    .sha {
      font-family:Inconsolata, Monaco, Consolas, 'Courier New', Courier;
      width:1px;
      text-align:right;
    }

    .avatar {
      position:absolute;
      top:10px;
      left:10px;
      border-radius:3px;
      background:rgba(0,0,0,0.1);
      width:32px;
      height:32px;

      &:after {
        content:'';
        position:absolute;
        top:0;
        left:0;
        right:0;
        bottom:0;
        border-radius:3px;
        box-shadow:inset rgba(0,0,0,0.1) 0 0 0 1px;
        z-index:3;
      }

      img {
        width:32px;
        height:32px;
        border-radius:3px;
        // display:none;
      }
    }
  }

  .diffs {
    width: 70%;
    overflow: auto;
    background:@syntax-background-color;
  }
}

/*
  You have these available from syntax variables:

  // General colors
  @syntax-text-color: #333;
  @syntax-cursor-color: #333;
  @syntax-selection-color: #69c;
  @syntax-selection-flash-color: #00f; // Color the selection is 'flashed' when you run find next
  @syntax-background-color: #fff;

  // Guide colors
  @syntax-wrap-guide-color: #ccc;
  @syntax-indent-guide-color: #ccc;
  @syntax-invisible-character-color: #ccc;

  // For find and replace markers
  @syntax-result-marker-color: #444;
  @syntax-result-marker-color-selected: #000;

  // Gutter colors
  @syntax-gutter-text-color: #333;
  @syntax-gutter-text-color-selected: #000;
  @syntax-gutter-background-color: #ccc;
  @syntax-gutter-background-color-selected: #eee;

  // For git diff info. i.e. in the gutter
  @syntax-color-added: green;
  @syntax-color-modified: orange;
  @syntax-color-removed: red;
  @syntax-color-renamed: blue;
*/

// Style straight up lifted from
// https://github.com/github-prototype/diff-view/blob/master/app/style/default.css
patch-view {
  display: block;
  font-family:Inconsolata, Monaco, Consolas, 'Courier New', Courier;
  font-size:15px;
  color: @syntax-text-color;
  background: @syntax-background-color;

  &:last-child {
    border-bottom:1px solid contrast(@syntax-background-color, fade(#000, 10%), fade(#000, 35%));
  }

  .diff-file {
    padding: 0 12px;
    font-family:@font-family;
    font-size:@font-size;
    line-height:2.5em;
    color:@syntax-text-color;
    background:contrast(@syntax-background-color, fade(#fff, 10%), fade(#000, 5%));
    border-width:0 0 1px;
    border-style: solid;
    border-color: contrast(@syntax-background-color, fade(#000, 10%), fade(#000, 35%));
  }

  & + patch-view .diff-file {
    border-width:1px 0;
  }

  @hunk-color: contrast(@syntax-background-color, fade(#4A90E2, 5%), fade(#4A90E2, 10%));

  .diff-hunk-header {
    color:fade(@syntax-text-color, 50%);
    background:@hunk-color;
    height:26px;
    line-height:26px;
  }

  .diff-hunk-header .old-line-number, .diff-hunk-header .new-line-number {
    background-color:darken(@hunk-color, 10%);
    border-color:darken(@hunk-color, 100%);
  }

  .diff-hunk {
    white-space: pre;
    color:fade(@syntax-text-color, 50%);;
    padding:0;
    margin:0;
    width:100%;
    border-collapse:collapse;
    line-height:1.3em;
    table-layout:fixed;
  }

  td {
    height:18px;
  }

  .old-line-number, .new-line-number {
    width:42px;
    text-align: center;
    vertical-align:top;
    color: fade(@syntax-text-color, 50%);
    box-shadow:inset contrast(@syntax-background-color, rgba(0,0,0,0.1), rgba(0,0,0,0.35)) -1px 0 0;
  }

  .diff-hunk-data {
    padding:0 8px;
    white-space:pre-wrap;
    word-wrap: break-word;
  }

  @deletion-number: fade(@syntax-color-removed, 50%);
  @addition-number: fade(@syntax-color-added, 50%);

  .deletion td {
    background-color:contrast(@syntax-background-color, fade(@syntax-color-removed, 8%), fade(@syntax-color-removed, 15%));
    color:@syntax-text-color;
  }

  .deletion .old-line-number, .deletion .new-line-number {
    background-color:contrast(@syntax-background-color, fade(@syntax-color-removed, 15%), fade(@syntax-color-removed, 25%));
    color: fade(@syntax-text-color, 50%);
  }

  .addition td {
    background-color:contrast(@syntax-background-color, fade(@syntax-color-added, 8%), fade(@syntax-color-added, 15%));
    color:@syntax-text-color;
  }

  .addition .old-line-number, .addition .new-line-number {
    background-color:contrast(@syntax-background-color, fade(@syntax-color-added, 15%), fade(@syntax-color-added, 25%));
    color: fade(@syntax-text-color, 50%);
  }
}
